/*!CK:1759685148!*//*1395625755,178134569*/

if (self.CavalryLogger) { CavalryLogger.start_js(["p7As4"]); }

__d("FriendsCenterStickyController",["StickyController"],function(a,b,c,d,e,f,g){for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k,l,m,n){"use strict";g.call(this,k,l,m,n);this.$FriendsCenterStickyController0=l;this.$FriendsCenterStickyController1=n||k.parentNode;var o=k.getBoundingClientRect();this.$FriendsCenterStickyController2=o.bottom-o.top;this.$FriendsCenterStickyController3=true;}j.prototype.unstick=function(){"use strict";this.$FriendsCenterStickyController3=false;this.handleScroll();};j.prototype.restick=function(){"use strict";this.$FriendsCenterStickyController3=true;this.handleScroll();};j.prototype.shouldFix=function(){"use strict";if(!this.$FriendsCenterStickyController3)return false;var k=this.$FriendsCenterStickyController1.getBoundingClientRect();return this.$FriendsCenterStickyController0>=k.top&&this.$FriendsCenterStickyController0+this.$FriendsCenterStickyController2<k.bottom;};e.exports=j;});
__d("FriendsCenterStickyHeader",["CSS","DOM","FriendsCenterStickyController","Style","Vector","ge","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=[];function o(p){"use strict";var q=l('blueBar');if(!q)return;var r=j.isFixed(q)?k.getElementDimensions(q).y:0,s=this.getPlaceholder(p.getBoundingClientRect());h.insertAfter(p,s);g.addClass(p,"_5m65");var t=new i(p,r,function(u){g.conditionShow(s,u);g.conditionClass(p,'stuck',u);}.bind(this));t.start();n[p.id]=t;}o.prototype.getPlaceholder=function(p){"use strict";var q=h.create('div');g.hide(q);j.set(q,'height',(p.bottom-p.top)+'px');j.set(q,'width',(p.right-p.left)+'px');return q;};o.stopSticky=function(p){"use strict";p&&(p.id in n)&&n[p.id].unstick();};o.startSticky=function(p){"use strict";p&&(p.id in n)&&n[p.id].restick();};e.exports=o;});
__d("FriendBrowserCheckboxController",["Arbiter","AsyncRequest","CSS","DOM","Event","Form","FriendsCenterStickyHeader","OnVisible","$","bind","copyProperties","csx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t='friend_browser_list';function u(){}q(u,{instances:{},getInstance:function(v){return this.instances[v];}});q(u.prototype,{init:function(v,w,x,y){u.instances[v]=this;this._id=v;this._simplified=x;this._infiniteScroll=y;this._form=w;this._contentGrid=j.find(w,'.friendBrowserCheckboxContentGrid');this._loadingIndicator=j.find(w,'.friendBrowsingCheckboxContentLoadingIndicator');this._checkboxResults=j.find(w,'.friendBrowserCheckboxResults');this._contentPager=j.find(w,'.friendBrowserCheckboxContentPager');this._standaloneFilters=null;this._searchStarted=false;this._stickyHeader=null;g.subscribe('friend-browser/name-change',this.getNew.bind(this,false));this.numGetNewRequests=0;this.queuedRequests={};k.listen(this._form,'submit',this.onFormSubmit.bind(this));},addTypeahead:function(v,w){v.subscribe('select',this.onHubSelect.bind(this,v,w));if(this._simplified)v.subscribe('unselect',this.onHubSelect.bind(this,v,w));},setStandaloneFilters:function(v){if(v){this._standaloneFilters=j.scry(document.body,'.friendBrowserCheckboxFilters')[0];this._stickyHeader=j.scry(o('fbSearchResultsBox'),"._5m65")[0];var w=o('doneSearchButton');w.onclick=function(){this._searchStarted=false;j.scry(document.body,"._5n-u").forEach(function(x){i.show(x);});i.hide(w);window.scrollTo(0,0);m.startSticky(this._stickyHeader);}.bind(this);}return this;},onFormSubmit:function(){this.getNew(true);return false;},addSelector:function(v){v.subscribe('change',this.getNew.bind(this,false));},onHubSelect:function(v,w,event,x){if(this._simplified){this.getNew(true);return;}if(!((event=='select')&&x.selected))return;var y=this.buildNewCheckbox(w,x.selected.text,x.selected.uid),z=j.find(this._standaloneFilters||this._form,'.checkboxes_'+w);j.appendContent(z.firstChild,y);var aa=j.scry(v.getElement(),'input[type="button"]');if(aa&&aa[0])aa[0].click();this.getNew(true);},buildNewCheckbox:function(v,w,x){var y=v+'_ids_'+x,z=v+'_ids[]',aa=j.create('input',{id:y,type:'checkbox',value:x,name:z,checked:true});k.listen(aa,'click',p(this,'getNew',false));var ba=j.create('td',null,aa);i.addClass(ba,'vTop');i.addClass(ba,'hLeft');var ca=j.create('label',null,w),da=j.create('td',null,ca);i.addClass(da,'vMid');i.addClass(da,'hLeft');var ea=j.create('tr');ea.appendChild(ba);ea.appendChild(da);return ea;},showMore:function(){var v=j.scry(this._contentPager,'.friendBrowserMorePager')[0];if(!v)return false;if(i.hasClass(v,'async_saving'))return false;var w=this.numGetNewRequests,x=this.getFormData();x.show_more=true;if(this._searchStarted)x.page=t;new h().setURI('/ajax/growth/friend_browser/checkbox.php').setData(x).setHandler(p(this,function(y){this.showMoreHandler(y,w);})).setStatusElement(v).send();},showMoreHandler:function(v,w){if(w==this.numGetNewRequests){var x=v.payload;j.appendContent(this._contentGrid,x.results);this.updatePagerAndExtraData(x.pager,x.extra_data);}},getFormData:function(){var v=l.serialize(this._form);if(this._standaloneFilters){var w=l.serialize(this._standaloneFilters);for(var x in w)v[x]=w[x];}return v;},getNew:function(v){this.numGetNewRequests++;var w=this.numGetNewRequests;i.addClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(s('friendBrowserCI'))i.addClass(o('friendBrowserCI'),'friendBrowserCheckboxContentOnload');this.startStandaloneSearch();i.show(this._loadingIndicator);var x=this.getFormData();x.used_typeahead=v;if(this._searchStarted)x.page=t;new h().setURI('/ajax/growth/friend_browser/checkbox.php').setData(x).setHandler(p(this,function(y){this.getNewHandler(y,w);})).send();},getNewHandler:function(v,w){if(w==this.numGetNewRequests){var x=v.payload;j.setContent(this._contentGrid,x.results);i.removeClass(this._checkboxResults,'friendBrowserCheckboxContentOnload');if(s('friendBrowserCI'))i.hide(o('friendBrowserCI'));i.hide(this._loadingIndicator);this.updatePagerAndExtraData(x.pager,x.extra_data);}},startStandaloneSearch:function(){if(!this._standaloneFilters)return;window.scrollTo(0,0);if(this._searchStarted)return;this._searchStarted=true;i.show(o('fbSearchResultsBox'));j.scry(document.body,"._5n-u").forEach(function(v){i.hide(v);});i.show(o('doneSearchButton'));m.stopSticky(this._stickyHeader);},updatePagerAndExtraData:function(v,w){j.setContent(this._contentPager,v);if(this._infiniteScroll)this.setupOnVisible();j.replace(this._form.elements.extra_data,w);},setupOnVisible:function(){var v=j.scry(this._contentPager,'.friendBrowserMorePager')[0];if(v&&this._id!='jewel'){this._onVisible&&this._onVisible.remove();this._onVisible=new n(v,p(this,'showMore'),false,1000);}}});e.exports=u;});
__d("ContextualHelpSearchController",["Event","AsyncRequest","DOM","CSS","Focus","Input","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=400;function o(){this._token=null;this._timerID=0;this._lastQuery=null;this.typing_listener=null;this.clear_listener=null;this.async_request=null;}m(o.prototype,{init:function(p,q,r,s,t,u){this.loader=p;this.search_box=q;this.topics_area=r;this.results_area=s;this.clear_button=t;this.typing_listener=g.listen(this.search_box,'keyup',this.setTimer.bind(this));this.clear_listener=g.listen(this.clear_button,'click',this.clearResults.bind(this));if(u==null||u.focusSearchBox==null||u.focusSearchBox)k.set(this.search_box);},source:'contextual_help',clearResults:function(){this.show(this.topics_area);this._lastQuery='';l.reset(this.search_box);k.set(this.search_box);if(this.async_request!==null){this.async_request.abort();this.async_request=null;}j.addClass(this.clear_button,'hidden_elem');},update:function(){var p=l.getValue(this.search_box);if(p===this._lastQuery)return;this._lastQuery=p;if(p===''){this.clearResults();return;}this.show(this.loader);var q={query:p,width:this._width||n,source:this.source};this.async_request=new h('/help/ajax/search/').setData(q).setHandler(function(r){this._update(r);}.bind(this));this.async_request.send();},_update:function(p){this.async_request=null;var q=p.getPayload().results;i.setContent(this.results_area,q);this.show(this.results_area);if(l.getValue(this.search_box)===''){this.clearResults();}else j.removeClass(this.clear_button,'hidden_elem');},setTimer:function(){if(this._timerID!==0)clearTimeout(this._timerID);this._timerID=setTimeout(this.update.bind(this),300);if(this.async_request!=null){this.async_request.abort();this.async_request=null;}},show:function(p){var q=[this.loader,this.topics_area,this.results_area];for(var r=0;r<q.length;r++)j.addClass(q[r],'hidden_elem');j.removeClass(p,'hidden_elem');}});e.exports=o;});
__d("legacy:RequestsJewel",["RequestsJewel"],function(a,b,c,d){a.RequestsJewel=b('RequestsJewel');},3);
__d("JewelX",["Event","Arbiter","ArbiterMixin","CSS","DOM","HTML","Keys","TabIsolation","Toggler","copyProperties","emptyFunction","reportData","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=function(u,v){u&&v&&this.init(u,v);};p(t,{_instancesByName:{},_resizeListener:null});p(t.prototype,i,{init:function(u,v){this.name=v.name;this.root=u;this.badge=v.badge;this.countNew=0;this.initialCount=0;this.escHandler=null;t._instancesByName[this.name]=this;var w=k.find(u,'.jewelFlyout'),x=new n(w);o.createInstance(w).setSticky(false);o.listen('show',this.root,function(y){this._logFirstClick();this.hasNew()&&this.markSeen();this.reset();this.inform('opened');h.inform('layer_shown',{type:'Jewel'});x.enable();this.setupEvents();}.bind(this));o.listen('hide',this.root,function(y,z){this.hasNew()&&this.markSeen();this.reset();this.inform('closed');h.inform('layer_hidden',{type:'Jewel'});x.disable();this.removeEvents();}.bind(this));h.subscribe('jewel/count-updated',function(y,z){z.jewel==this.name&&this.update(z);}.bind(this));h.subscribe('jewel/count-initial',function(y,z){z.jewel==this.name&&this.setInitial(z);}.bind(this));h.subscribe('jewel/reset',function(y,z){z.jewel==this.name&&this.reset();}.bind(this));t._resizeListener=t._resizeListener||(function(){var y=null;return g.listen(window,'resize',function(){clearTimeout(y);y=s(h.inform.bind(h,'jewel/resize'),100);});})();},getRoot:function(){return this.root;},hasNew:function(){return j.hasClass(this.root,'hasNew');},isOpen:function(){return j.hasClass(this.root,'openToggler');},reset:function(){j.removeClass(this.root,'hasNew');},setContent:function(u){var v=k.find(this.root,'ul.jewelItemList');k.setContent(v,l(u));},update:function(u){this.countNew=u.count;if(typeof this.countNew==='number'&&this.countNew<0)this.countNew=0;this.badge.setLegacyContent(this.countNew);var v=isNaN(this.countNew)||this.countNew>0;j.conditionClass(this.root,'hasNew',v);this.inform('updated',u);},setInitial:function(u){this.initialCount=u;},setupEvents:function(){this.escHandler=g.listen(document.documentElement,'keydown',function(u){if(u.keyCode===m.ESC&&this.isOpen())o.hide(this.root);}.bind(this));},removeEvents:function(){if(this.escHandler)this.escHandler.remove();},markSeen:function(){h.inform('jewel/count-updated',{jewel:this.name,count:0},h.BEHAVIOR_STATE);this.inform('marked-seen');},_logFirstClick:function(){this._logFirstClick=q;r('jewel_click',{gt:{count:this.countNew,initial:this.initialCount,jewel:this.name}});}});e.exports=t;});
__d("MercuryFilters",["MessagingTag","arrayContains"],function(a,b,c,d,e,f,g,h){var i=[g.UNREAD],j={ALL:'all',getSupportedFilters:function(){return i.concat();},isSupportedFilter:function(k){return h(i,k);}};e.exports=j;});
__d("MercuryOrderedThreadlist",["LogHistory","MercuryActionTypeConstants","MercuryFilters","MercuryFolders","MercuryPayloadSource","MercurySingletonMixin","MessagingTag","RangedCallbackManager","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","arrayContains","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=g.getInstance('ordered_threadlist_model'),u=i.getSupportedFilters().concat([i.ALL,m.GROUPS]),v=j.getSupportedFolders();function w(ga,ha,ia,ja){var ka=[],la=false,ma=false,na=(ha||[]).filter(function(ua){var va=ua.filter||i.ALL;return (ua.folder==ia||(!ua.folder&&ia==m.INBOX))&&va==ja;}),oa=ga._threadlistOrderMap[ia][ja].getAllResources(),pa;na.forEach(function(ua){ka=ka.concat(ua.thread_ids);if(ua.error){if(ua.end>oa.length)ma=ua.error;}else{var va=ua.end-ua.start;if(ua.thread_ids.length<va)la=true;}if(!pa||ua.end>pa)pa=ua.end;});aa(ga,ka,ia,ja);if(la){ga._threadlistOrderMap[ia][ja].setReachedEndOfArray();}else if(ma){ga._threadlistOrderMap[ia][ja].setError(ma);}else{var qa=ga._threadlistOrderMap[ia][ja].getCurrentArraySize();if(pa&&qa<pa){var ra={},sa=oa.concat(ka),ta=sa.filter(function(ua){var va=ra[ua];ra[ua]=true;return va;});if(ta.length){t.warn('duplicate_threads',{folder:ia,expected_final_size:pa,actual_final_size:qa,duplicate_thread_ids:ta});ga._serverRequests.fetchThreadlistInfo(pa,ta.length,ia,ja==i.ALL?null:ja);}}}}function x(ga,ha){v.forEach(function(ia){u.forEach(function(ja){w(ga,ha,ia,ja);});});}function y(ga,ha){var ia={};v.forEach(function(ja){ia[ja]={};u.forEach(function(ka){ia[ja][ka]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});ha.forEach(function(ja){if(ja.is_forward)return;var ka=ja.thread_id,la=ba(ga,ka),ma=ca(ga,ka);function na(){ma.forEach(function(pa){ia[la][pa].to_add.push(ka);if(!ga._threadlistOrderMap[la][pa].hasReachedEndOfArray()&&!ga._threadlistOrderMap[la][pa].hasResource(ka))ia[la][pa].to_remove_if_last_after_add[ka]=true;});}function oa(pa){if(r(u,pa))if(r(ma,pa)){ia[la][pa].to_add.push(ka);}else ia[la][pa].to_remove.push(ka);}if(!la){if(ja.action_type===h.CHANGE_FOLDER||ja.action_type===h.CHANGE_ARCHIVED_STATUS)v.forEach(function(pa){if(pa!==la)u.forEach(function(qa){ga._threadlistOrderMap[pa][qa].removeResources([ka]);});});return;}switch(ja.action_type){case h.DELETE_THREAD:ma.forEach(function(pa){ia[la][pa].to_remove.push(ka);});break;case h.CHANGE_ARCHIVED_STATUS:case h.CHANGE_FOLDER:na();break;case h.CHANGE_READ_STATUS:oa(m.UNREAD);break;case h.USER_GENERATED_MESSAGE:case h.LOG_MESSAGE:ma.forEach(function(pa){if(da(ga,ka,la,pa))ia[la][pa].to_add.push(ka);});break;}});v.forEach(function(ja){u.forEach(function(ka){var la=ga._threadlistOrderMap[ja][ka];aa(ga,ia[ja][ka].to_add,ja,ka);for(var ma=la.getCurrentArraySize()-1;ma>=0;ma--){var na=la.getResourceAtIndex(ma);if(!ia[ja][ka].to_remove_if_last_after_add[na])break;ia[ja][ka].to_remove.push(na);}la.removeResources(ia[ja][ka].to_remove);});});}function z(ga,ha){var ia={};v.forEach(function(ja){ia[ja]={};u.forEach(function(ka){ia[ja][ka]=[];});});ha.forEach(function(ja){var ka=ba(ga,ja.thread_id),la=ca(ga,ja.thread_id);if(ka)la.forEach(function(ma){if(da(ga,ja.thread_id,ka,ma))ia[ka][ma].push(ja.thread_id);});});v.forEach(function(ja){u.forEach(function(ka){if(ia[ja][ka].length>0)aa(ga,ia[ja][ka],ja,ka);});});}function aa(ga,ha,ia,ja){ja=ja||i.ALL;ga._threadlistOrderMap[ia][ja].addResources(ha);v.forEach(function(ka){if(ka!=ia)ga._threadlistOrderMap[ka][ja].removeResources(ha);});}function ba(ga,ha){var ia=ga._threads.getThreadMetaNow(ha),ja=null;if(!ia){ja='No thread metadata';}else if(!ia.folder)ja='No thread folder';if(ja){var ka={error:ja,tid:ha};t.warn('no_thread_folder',ka);return null;}var la=ia.folder;if(ia.is_archived)la=m.ACTION_ARCHIVED;if(ga._threadlistOrderMap[la]){return la;}else return null;}function ca(ga,ha){var ia=ga._threads.getThreadMetaNow(ha),ja=[i.ALL];if(!ia){var ka={error:'no_thread_metadata',tid:ha};t.warn('no_thread_metadata',ka);return [];}if(ia.unread_count)ja.push(m.UNREAD);if(!ia.is_canonical)ja.push(m.GROUPS);return ja;}function da(ga,ha,ia,ja){var ka=ga._threads.getThreadMetaNow(ha);return ka&&ka.timestamp&&ba(ga,ha)==ia&&r(ca(ga,ha),ja);}function ea(ga){this._fbid=ga;this._serverRequests=o.getForFBID(this._fbid);this._threadInformer=p.getForFBID(this._fbid);this._threads=q.getForFBID(this._fbid);this._threadlistOrderMap={};v.forEach(function(ha){this._threadlistOrderMap[ha]={};u.forEach(function(ia){this._threadlistOrderMap[ha][ia]=new n(function(ja){return this._threads.getThreadMetaNow(ja).timestamp;}.bind(this),function(ja,ka){return ka-ja;},this._serverRequests.canLinkExternally.bind(this._serverRequests));}.bind(this));}.bind(this));this._serverRequests.subscribe('update-threadlist',function(ha,ia){if(!fa(ia))return;var ja=ia.ordered_threadlists;if(ja&&ja.length){x(this,ja);}else{var ka=(ia.actions||[]).filter(function(la){return la.thread_id;});z(this,ia.threads||[]);y(this,ka);}this._threadInformer.updatedThreadlist();}.bind(this));}s(ea.prototype,{getThreadlist:function(ga,ha,ia,ja,ka,la){return this.getFilteredThreadlist(ga,ha,ia,i.ALL,ja,ka,la);},getFilteredThreadlist:function(ga,ha,ia,ja,ka,la,ma){var na=this._threadlistOrderMap[ia][ja],oa=na.executeOrEnqueue(ga,ha,ka,la),pa=na.getUnavailableResources(oa),qa=na.getError(ga,ha,la);if(pa.length||qa){if(na.getCurrentArraySize()<ga){var ra={start:ga,limit:ha,filter:ja,resources_size:na.getCurrentArraySize()};t.warn('range_with_gap',ra);}na.setError(false);this._serverRequests.fetchThreadlistInfo(na.getCurrentArraySize(),pa.length,ia,ja==i.ALL?null:ja,ma);}return oa;},getThreadlistUntilTimestamp:function(ga,ha,ia){ia=ia||i.ALL;return this._threadlistOrderMap[ha][ia].getElementsUntil(ga);},unsubscribe:function(ga,ha,ia){ia=ia||i.ALL;this._threadlistOrderMap[ha][ia].unsubscribe(ga);}});s(ea,l);function fa(ga){switch(ga.payload_source){case k.CLIENT_CHANGE_ARCHIVED_STATUS:case k.CLIENT_CHANGE_READ_STATUS:case k.CLIENT_CHANGE_FOLDER:case k.CLIENT_CHANNEL_MESSAGE:case k.CLIENT_DELETE_MESSAGES:case k.CLIENT_DELETE_THREAD:case k.CLIENT_SEND_MESSAGE:case k.SERVER_SEND_MESSAGE:case k.SERVER_CONFIRM_MESSAGES:case k.SERVER_FETCH_THREADLIST_INFO:case k.SERVER_THREAD_SYNC:return true;case k.SERVER_INITIAL_DATA:return ga.ordered_threadlists;default:return false;}}e.exports=ea;});
__d("MercuryPresence",["Arbiter","Bootloader","AvailableListConstants","DOM","CSS","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={},n={},o={updateOnPresenceChanges:function(u,v){n[v.tagName]=true;m[u]=true;k.addClass(v,'presenceListener_'+u);var w=p(u);q(v,w.classes);r(v,w.label);}};function p(u){var v=t(u),w={presenceActive:false,presenceMobile:false},x=null;switch(v){case i.ACTIVE:w.presenceActive=true;x="Active";break;case i.MOBILE:w.presenceMobile=true;x="Mobile";break;default:break;}return {classes:w,label:x};}function q(u,v){for(var w in v)k.conditionClass(u,w,v[w]);}function r(u,v){if(u&&v){var w=j.create('span',{className:'accessible_elem'},v);j.setContent(u,w);}}function s(){for(var u in m){var v=p(u);for(var w in n){var x=j.scry(document,w+'.presenceListener_'+u);for(var y=0;y<x.length;y++){q(x[y],v.classes);r(x[y],v.label);}}}}var t=function(u){return i.OFFLINE;};h.loadModules(["AvailableList"],function(u){t=u.get;s();});g.subscribe(i.ON_AVAILABILITY_CHANGED,s);e.exports=o;});
__d("MessagingEvents",["Arbiter","ChannelConstants","arrayContains","copyProperties","isEmpty"],function(a,b,c,d,e,f,g,h,i,j,k){var l={},m=new g();function n(o){if(!k(l))return;for(var p in o)m.inform('count/'+p,o[p]);}m.subscribe('mark-as-read',function(o,p){(p.tids||p.chat_ids||[]).forEach(function(q){q=''+q;if(!(q in l)){l[q]=true;var r=function(){m.unsubscribe(s);clearTimeout(t);delete l[q];},s=m.subscribe('read',function(u,v){if(i((v.tids||[]),q)||i((v.chat_ids||[]),q))r();}),t=setTimeout(r,60000);}});});g.subscribe(h.getArbiterType('messaging'),function(o,p){var q=j({},p.obj),event=q.event||'';delete q.type;delete q.event;m.inform(event,q);if('unread_counts' in q){var r=q.unread_counts;n({unread:r.inbox,other_unseen:r.other});}});g.subscribe(h.getArbiterType('inbox'),function(o,p){var q=j(p.obj);delete q.type;n(q);});a.MessagingEvents=e.exports=m;},3);
__d("RenderManager",["copyProperties"],function(a,b,c,d,e,f,g){function h(i){"use strict";this._isDirty=false;this._obj=i;}h.prototype.dirty=function(){"use strict";if(!this._isDirty){this._isDirty=true;setTimeout(this._doPaint.bind(this),0);}};h.prototype._doPaint=function(){"use strict";this._isDirty=false;this._obj.paint();};e.exports=h;});
__d("CounterDisplay",["Arbiter","CSS","DOM","RenderManager","Run","$","copyProperties","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p,q,r,s,t,u){m(this,{_name:p,_valueNode:l(q),_wrapperNode:l(r)||null,_statusClass:t,_rm:new j(this),_arbiterSubscription:null,_count:0});var v=this._valueNode.firstChild;if(v){var w=parseInt(v.nodeValue,10);if(!isNaN(w))this._count=w;}this._statusNode=s?l(s):null;this._subscribeAll();o.instances.push(this);if(!u)k.onLeave(this._destroy.bind(this),true);}m(o,{EVENT_TYPE_ADJUST:'CounterDisplay/adjust',EVENT_TYPE_UPDATE:'CounterDisplay/update',instances:[],adjustCount:function(p,q){g.inform(o.EVENT_TYPE_ADJUST+'/'+p,q);},setCount:function(p,q){g.inform(o.EVENT_TYPE_UPDATE+'/'+p,q);}});m(o.prototype,{_destroy:function(){delete this._valueNode;delete this._wrapperNode;if(this._arbiterSubscription){this._arbiterSubscription.unsubscribe();delete this._arbiterSubscription;}n(o.instances,this);},adjustCount:function(p){this._count=Math.max(0,this._count+p);this._rm.dirty();return this;},setCount:function(p){this._count=Math.max(0,p);this._rm.dirty();return this;},paint:function(){i.setContent(this._valueNode,this._count);this._toggleNodes();},_toggleNodes:function(){if(this._wrapperNode)h.conditionClass(this._wrapperNode,'hidden_elem',this._count<=0);if(this._statusClass&&this._statusNode)h.conditionClass(this._statusNode,this._statusClass,this._count>0);},_subscribeAll:function(){var p=[o.EVENT_TYPE_ADJUST+'/'+this._name,o.EVENT_TYPE_UPDATE+'/'+this._name];this._arbiterSubscription=g.subscribe(p,this._onInform.bind(this),g.SUBSCRIBE_NEW);},_onInform:function(p,q){q=parseInt(q);if(isNaN(q))return;if(p.indexOf(o.EVENT_TYPE_ADJUST)!=-1){this.adjustCount(q);}else if(p.indexOf(o.EVENT_TYPE_UPDATE)!=-1){this.setCount(q);}else return;return;}});e.exports=o;});
__d("isEmail",[],function(a,b,c,d,e,f){var g=/^[\w!#\$%&'\*\+\/\=\?\^`\{\|\}~\-]+(:?\.[\w!#\$%&`\*\+\/\=\?\^`\{\|\}~\-]+)*@(?:[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9\-]*[a-z0-9])?$/i;function h(i){return g.test(i);}e.exports=h;});
__d("PagesVoiceBar",["$","Arbiter","AsyncRequest","CSS","ChannelConstants","DOM","PageTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n='PagesVoiceBar/initialized',o='PagesVoiceBar/switchVoice',p='page_transition',q='pages_voice_bar_sync',r=null,s=null,t=false;function u(aa,ba){new i('/ajax/pages/switch_voice.php').setData(ba).setHandler(function(ca){y();}).send();}function v(){r=null;}function w(aa,ba){if(ba.obj.profile_id&&ba.obj.profile_id==r)y();}function x(aa){h.subscribe(n,aa);}function y(){m.getNextURI().go();}var z={initVoiceBar:function(){if(t)return;s=g('pagesVoiceBarContent');h.subscribe(o,u);h.subscribe(p,v);h.subscribe(k.getArbiterType(q),w);t=true;h.inform(n,null,h.BEHAVIOR_STATE);},update:function(aa,ba){x(function(){r=ba;l.setContent(s,aa);});}};e.exports=z;});
__d("PrivacyLiteFlyout",["Animation","Arbiter","ArbiterMixin","AsyncRequest","CSS","DOM","Ease","Event","Parent","PrivacyConst","SelectorDeprecated","Style","Toggler","copyProperties","csx","cx","ge","XPrivacyRemindersDismissControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){var y='PrivacyLiteFlyout/expandingSection',z={},aa={};function ba(ja,ka,la){var ma=ka?0:ja.offsetHeight;r.set(ja,'height',ma+'px');r.set(ja,'overflow','hidden');k.show(ja);var na=ka?ja.scrollHeight:0,oa=l.getID(ja);z[oa]&&z[oa].stop();z[oa]=new g(ja).to('height',na).ondone(function(){z[oa]=null;r.set(ja,'height','');r.set(ja,'overflow','');na||k.hide(ja);la();}).duration(Math.abs(na-ma)*1.5).ease(m.sineOut).go();}function ca(ja){return new j().setURI(ja).send();}function da(){return ca('/ajax/privacy/privacy_lite/increment_masher_tip_count');}function ea(){return ca('/ajax/privacy/privacy_lite/dismiss_masher_tip');}var fa=null,ga=false,ha=false,ia=t({loadBody:function(){this._loadBody(false);},loadBodyFromMegaphone:function(){this._loadBody(true);},_loadBody:function(ja){if(!ga&&w('fbPrivacyLiteFlyoutLoading')){ga=true;new j('/ajax/privacy/privacy_lite/loader').setData({from_megaphone:ja}).send();}},renderBody:function(ja){var ka=w('fbPrivacyLiteFlyoutLoading');if(ka){l.replace(ka,ja);ia.inform('load',null,h.BEHAVIOR_STATE);}},hideCleanup:function(ja){h.inform(y);var ka=l.scry(ja,"._2va0").forEach(function(la){k.removeClass(la,"_2va0");});},registerFlyoutToggler:function(ja,ka){fa=ka;var la=s.createInstance(ja);la.setSticky(false);s.listen(['show','hide'],ka,function(ma){ia.inform(ma);ha=ma==='show';if(!ha){ia.hideCleanup(ja);la.hide();h.inform('layer_hidden',{type:'PrivacyShortcutsFlyout'});}else h.inform('layer_shown',{type:'PrivacyShortcutsFlyout'});});},isFlyoutVisible:function(){return fa&&s.getActive()===fa;},exists:function(){return !!l.scry(document.body,"._59fc")[0];},setFlyoutVisible:function(ja){ja?s.show(fa):s.hide(fa);},showSection:function(ja){var ka=aa[ja],la=ka.chevron,ma=ka.sublist_container;h.inform(y,la);if(ia.inform('expand',ja)!==false){k.removeClass(la,"_9or");k.addClass(la,"_9os");ba(ma,true,function(){ia.inform('expanded',ja);});}},hideSection:function(ja,ka,la){var ma=aa[ja],na=ma.chevron,oa=ma.sublist_container;if(la===na)return;if(ia.inform('collapse',ja)!==false){k.addClass(na,"_9or");k.removeClass(na,"_9os");ba(oa,false,function(){ia.inform('collapsed',ja);});}},toggleSection:function(ja){var ka=aa[ja].chevron;s.getInstance(ka).hide();if(k.hasClass(ka,"_9or")){ia.showSection(ja);new j('/ajax/privacy/privacy_lite/log_section_expand').setData({section:ja}).send();}else ia.hideSection(ja);},registerSection:function(ja,ka){aa[ja]=ka;h.subscribe(y,ia.hideSection.bind(null,ja));n.listen(ka.section_block,'click',ia.toggleSection.bind(null,ja));},registerInlineHelpOnAudienceChange:function(ja,ka,la,ma){q.subscribe('select',function(na,oa){if(oa.selector!=ja)return;var pa=l.find(ka,"._9o_"),qa=l.find(ka,"._2v9_");if(ma){var ra=l.find(ka,"._5n9w"),sa=(oa.value==p.BaseValue.EVERYONE);k.conditionShow(ra,sa);k.conditionShow(pa,!sa);if(ra&&sa){var ta=(new x()).setString('type','delta_everyone').setBool('log_plite',true).getURI();new j(ta).send();}}else k.show(pa);k.hide(qa);if(la)new j('/ajax/privacy/privacy_lite/kill_intro').send();});},registerInlineHelpXOutOnClick:function(ja,ka,la){n.listen(ja,'click',function(){k.addClass(ka,"_9p0");});},registerBlockUnhideOnFocus:function(ja,ka){n.listen(ja,'focus',k.show.bind(null,ka));},registerMessageFilterSettingOnClick:function(ja,ka){var la=l.find(ja,"._fv0");n.listen(ja,'click',function(){if(la.checked)new j('/ajax/mercury/change_filtering_type.php').setData({filtering_type:ka,source:'privacy_lite'}).send();});},registerMasher:function(ja,ka){var la=false;h.subscribe(y,function(ma,na){var oa=true;if(na)oa=!!l.scry(o.byTag(na,'li'),"._571t").length;if(la||!oa)return;la=!!(da());});n.listen(ka,'click',function(){l.remove(ja);ea();});}},i);e.exports=ia;});
__d("PrivacyLiteFlyoutHelp",["Event","Arbiter","AsyncRequest","ContextualHelpSearchController","CSS","DOM","Parent","copyProperties","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q,r;function s(t,u,v,w,x){this._width=315;r=l.find(u,'input');var y=l.create('div');this.init(t,r,y,v,w,{focusSearchBox:false});q=m.byClass(u,"_8-a");g.listen(x,'click',this._hideSearch.bind(this));h.subscribe('PrivacyLiteFlyout/expandingSection',this._hideSearch.bind(this));var z=l.scry(q,"._d1r")[0];z&&g.listen(z,'click',function(){k.addClass(q,"_aw6");r.focus();if(!this.suggestedResults)new i('/ajax/privacy/privacy_lite/help_suggestions').setHandler(function(aa){var ba=aa.getPayload().searchSuggestions,ca=l.find(q,"._4_8m");l.setContent(ca,ba);k.addClass(q,"_4_8l");}.bind(this)).send();}.bind(this));}n(s.prototype,new j(),{source:'privacy_shortcuts',_hideSearch:function(){this.clearResults();k.removeClass(q,"_aw6");},show:function(t){if(t===this.topics_area){k.removeClass(q,"_aw7");return;}else if(t===this.loader){k.addClass(q,"_aw7");k.hide(this.results_area);}else k.hide(this.loader);k.show(t);}});e.exports=s;});
__d("ViewasChromeBar",["Event","Arbiter","AsyncRequest","CSS","DOM","Focus","ModalMask","PageTransitions","Parent","cx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r='ViewasChromeBar/initialized',s=null,t=false;function u(x){h.subscribe(r,x);}function v(x){j.addClass(x,"_7g7");var y=k.find(x,"._7g0");l.set(k.find(y,'.textInput'));}var w={initChromeBar:function(x){if(t)return;s=x;t=true;h.inform(r,null,h.BEHAVIOR_STATE);},update:function(x,y){u(function(){k.setContent(s,x);if(y)new i('/ajax/privacy/glasgow/viewas_bar_flyout_open').send();});},registerSpecificModeOnClick:function(x){g.listen(x,'click',v.bind(null,o.byClass(x,"_7f-")));},registerFlyoutModalMask:function(){m.show();n.registerHandler(m.hide,10);}};e.exports=w;});
__d("BingScalingCommon",[],function(a,b,c,d,e,f){var g={integrateWebsuggestions:function(h,i,j,k,l){var m=[],n=i?m:[],o=[],p=0,q=0,r=j;k=Math.floor(j*k);for(var s=0;s<h.length;s++){var t=h[s];if(t.type==='websuggestion'&&!t.isSeeMore){if((r>0&&p<k)||(p>0&&p<l)){n.push(t);p++;r--;}else if(r>0)o.push(t);}else{if(r<=0&&!i)continue;m.push(t);q++;r--;}}if(r>0&&o.length>0)n=n.concat(o.slice(0,r));if(!i)return m.concat(n);return n;}};e.exports=g;});
__d("legacy:SearchDataSource",["SearchDataSource"],function(a,b,c,d){a.SearchDataSource=b('SearchDataSource');},3);
__d("SearchTypeaheadCore",["Arbiter","DOM","Event","Input","Parent","TypeaheadCore","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){for(var n in l)if(l.hasOwnProperty(n))p[n]=l[n];var o=l===null?null:l.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=l;function p(q){"use strict";l.call(this,q);}p.prototype.init=function(q,r,s){"use strict";o.init.call(this,q,r,s);var t=k.byTag(s,'form'),u=this.reset.bind(this);g.subscribe('pre_page_transition',function(event,w){var x=/^\/search/,y=x.test(w.from.path),z=x.test(w.to.path);if(y&&!z)setTimeout(u,0);});if(t){var v=h.find(t,'input.search_sid_input');i.listen(t,'submit',function(){if(this.data&&this.data.queryData)v.value=this.data.queryData.sid;setTimeout(u,0);}.bind(this),i.Priority.URGENT);}};p.prototype.select=function(){"use strict";this.reset();this.element.focus();setTimeout((function(){this.element.blur();}).bind(this),0);};p.prototype.handleTab=function(event){"use strict";var q=this.view.getQuerySuggestion(this.value);if(q){j.setValue(this.element,q);this.checkValue();event.kill();}else o.handleTab.call(this,event);};p.prototype.getSearchType=function(){"use strict";return 'regular';};e.exports=p;});
__d("legacy:SearchTypeaheadCore",["SearchTypeaheadCore"],function(a,b,c,d){a.SearchTypeaheadCore=b('SearchTypeaheadCore');},3);
__d("SearchTypeaheadView",["Arbiter","ContextualTypeaheadView","ContextualLayerUpdateOnScroll","copyProperties","DOM","goURI","MusicConstants","MusicEvents","tx","URI","isEmail","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){for(var s in h)if(h.hasOwnProperty(s))u[s]=h[s];var t=h===null?null:h.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=h;function u(w,x){"use strict";h.call(this,w,x);}u.prototype.initializeLayer=function(){"use strict";t.initializeLayer.call(this);this.layer.setOffsetY(-1);this.layer.enableBehavior(i);};u.prototype.ignoreClick=function(event){"use strict";event.prevent();};u.prototype.render=function(w,x,y){"use strict";if(this._bucketize)x=v(x);var z={results:x,value:w};this.inform('finalResultsReordering',z);return t.render.call(this,w,z.results,y);};u.prototype.disableBucketization=function(){"use strict";this._bucketize=false;};u.prototype.buildBuckets=function(w,x){"use strict";var y=x.length,z=0,aa;for(aa=0;aa<y;++aa)if(x[aa].type=='user')z++;this._redirectToUsersResultsPage=this.showFilterResults&&z===y;this.setWebSuggLoggingParams(w,x);if(this._bucketize)x=t.buildBuckets.call(this,w,x);if(w&&this._shouldShowSeeMore){x.push(this.buildSeeMore(w,y));if(q(w)&&(z<1))x.push(this.buildInvite(w));}return x;};u.prototype.buildSeeMore=function(w,x){"use strict";var y=this.getSeeMoreText(w,x),z=x==1?"Displaying top result":o._("Displaying top {number} results",{number:x}),aa=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getSeeMoreEndpoint(w),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'seeMore'},[y,k.create('span',{className:'arrow'})]),k.create('span',{className:'subtext'},[z])])])]);aa.setAttribute('aria-label',y);return {uid:'search',node:aa,search:true};};u.prototype.getSeeMoreText=function(w,x){"use strict";if(this.showKeywordResultsPage)return r._("Search for {query}",[r.param("query",w)]);if(x<=0)return o._("See results for {query}",{query:w});if(this._redirectToUsersResultsPage)return r._("Filter results for {query}",[r.param("query",w)]);return o._("See more results for {query}",{query:w});};u.prototype.buildInvite=function(w){"use strict";var x=o._("Invite {query} to Facebook",{query:w}),y=k.create('li',{className:'calltoaction'},[k.create('a',{href:this.getInviteEndpoint(w),rel:'ignore'},[k.create('span',{className:'text'},[k.create('span',{className:'invite'},[x])])])]);y.setAttribute('aria-label',x);return {uid:'invite',node:y,search:true};};u.prototype.searchPageQueryData=function(w){"use strict";return j({q:w},this.queryData||{});};u.prototype.searchPageTypeData=function(){"use strict";return this._redirectToUsersResultsPage?{type:"users"}:{};};u.prototype.select=function(w){"use strict";var x=this.index,y=this.results[x];if(!y||y.type=='header')return;var z=this.items[x],aa=k.scry(z,'a')[0];if(y.song){if(aa)n.inform(m.MUSIC_BUTTON.ACTIVATE,aa);w&&this.inform('highlight',{index:x,selected:y});}else{t.select.call(this,w);if(aa&&aa.href)if(aa.target=='_blank'){window.open(aa.href);}else l(aa.href);}};u.prototype.setSid=function(w){"use strict";this.queryData.tas=w;};u.prototype.getSeeMoreEndpoint=function(w){"use strict";return p(this.seeMoreEndpoint).addQueryData(this.searchPageQueryData(w)).addQueryData(this.searchPageTypeData()).toString();};u.prototype.getInviteEndpoint=function(w){"use strict";return p('/invite.php').addQueryData({email_list:w});};u.prototype.show=function(){"use strict";if(!this.isVisible()){g.inform('layer_shown',{type:'SearchTypeahead'});t.show.call(this);}};u.prototype.hide=function(){"use strict";if(this.isVisible()){g.inform('layer_hidden',{type:'SearchTypeahead'});t.hide.call(this);}};u.prototype.getQuerySuggestion=function(w){"use strict";var x=this.results[this.index],y=x&&x.type!='header'?x.text.toLowerCase():'';return y==w.toLowerCase()?'':y;};u.prototype.setWebSuggLoggingParams=function(w,x){"use strict";var y=0,z=0;for(var aa=0;aa<x.length;aa++)if(x[aa].type==='websuggestion'){if(z===0)z=aa+1;var ba='FR'+(aa-y)+'AS'+y,ca=aa+1;x[aa].path+='&wssk='+ba+'&wssp='+ca+'&wspq='+encodeURIComponent(w);x[aa].path+='&wssrc='+x[aa].websuggestion_source;y++;}var da='&wssc='+x.length+'-'+w.length+'&wsbp='+y+'-'+z;for(aa=0;aa<x.length;aa++)if(x[aa].type==='websuggestion')x[aa].path+=da;};function v(w){var x,y,z,aa,ba=[],ca={};y=w.length;for(x=0;x<y;x++){z=w[x];aa=z.render_type||z.type;if(!ca.hasOwnProperty(aa)){ca[aa]=ba.length;ba.push([]);}ba[ca[aa]].push(z);}var da=[];y=ba.length;for(x=0;x<y;++x){z=ba[x][0];aa=z.render_type||z.type;da=da.concat(ba[x]);}return da;}j(u.prototype,{_shouldShowSeeMore:true,_bucketize:true,queryData:{init:'quick'}});e.exports=u;});
__d("legacy:SearchTypeaheadView",["SearchTypeaheadView"],function(a,b,c,d){a.SearchTypeaheadView=b('SearchTypeaheadView');},3);
__d("legacy:Typeahead",["Typeahead"],function(a,b,c,d){a.Typeahead=b('Typeahead');},3);
__d("TypeaheadSearchRecorderBasic",["SearchTypeaheadRecorder","copyProperties","emptyFunction"],function(a,b,c,d,e,f,g,h,i){function j(k){"use strict";this._typeahead=k;}j.prototype.enable=function(){"use strict";new g(this._typeahead);};h(j.prototype,{disable:i});e.exports=j;});
__d("legacy:SearchRecorderBasicTypeaheadBehavior",["TypeaheadSearchRecorderBasic"],function(a,b,c,d,e,f,g){if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.searchRecorderBasic=function(h){h.enableBehavior(g);};},3);
__d("SearchTypeaheadRenderer",["BadgeHelper","DOM","MusicButtonManager","TokenizeUtil","TypeaheadFacepile","WWWBase"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o){var p=[],q=n.photos||n.photo;if(q){if(q instanceof Array){q=k.render(q);}else q=h.create('img',{alt:'',src:q});p.push(q);if(n.song){p.push(h.create('span',{className:'playButton'}));p.push(h.create('span',{className:'playLoader'}));}}var r;if(n.text){var s=n.alias,t=this.value,u=n.text;r=[u];if(s&&j.isQueryMatch(t,s)&&!j.isQueryMatch(t,u))r.push(h.create('span',{className:'alias'},[' \xB7 '+s]));if(n.is_verified)r.push(g.renderBadge('xsmall','verified'));p.push(h.create('span',{className:'text'},r));}if(n.category){var v=[n.category];if(n.is_external)v.push(h.create('span',{className:'arrow'}));var w=n.message?'preCategory':'category';p.push(h.create('span',{className:w},v));}if(n.message)p.push(h.create('span',{className:'category'},[n.message]));var x=n.subtextOverride||n.subtext;if(x)p.push(h.create('span',{className:'subtext'},[x]));var y=n.classNames||n.type||'',z=n.is_external?'_blank':'',aa=!n.song&&n.path||'';if(aa){if(!(/^https?\:\/\//).test(aa))aa=l.uri+aa.substr(1);aa+=(aa.indexOf('?')>0?'&':'?')+'ref=ts&fref=ts';}var ba=h.create('a',{href:aa,rel:'ignore',target:z},p);if(n.song){ba.id='mb_'+(Math.random()*1e+06|0);setTimeout(i.addButton.bind(null,n.song.provider,ba.id,n.song.url,n.song.context,n.song.media_type),0);ba.onclick=this.ignoreClick;}var ca=h.create('li',{className:y},[ba]);if(n.text)ca.setAttribute('aria-label',n.text);return ca;}m.className='search';e.exports=m;});
__d("legacy:SearchTypeaheadRenderer",["SearchTypeaheadRenderer"],function(a,b,c,d){if(!a.TypeaheadRenderers)a.TypeaheadRenderers={};a.TypeaheadRenderers.search=b('SearchTypeaheadRenderer');},3);
void(0);
__d("TypeaheadSearchFilter",["Arbiter","copyProperties"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this._typeahead=j;}i.prototype.enable=function(){"use strict";var j=this._typeahead,k=j.getView().seeMoreEndpoint;this._subscriptions=[g.subscribe('search/typeahead/updateFilter',function(l,m){if(m.filter_type=='web')j.getView().queryData.form='FBKBFR';j.getView().queryData.type=m.filter_type;}),g.subscribe('search/typeahead/updateSeeMoreEndpoint',function(l,m){j.getView().seeMoreEndpoint=m;}),g.subscribe('page_transition',function(l,m){if(j.getView().queryData.form)delete j.getView().queryData.form;delete j.getView().queryData.type;j.getView().seeMoreEndpoint=k;},g.SUBSCRIBE_NEW)];};i.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(j){j.unsubscribe();});this._subscriptions=null;};h(i.prototype,{_subscription:null});e.exports=i;});
__d("legacy:SearchFilterTypeaheadBehavior",["TypeaheadSearchFilter"],function(a,b,c,d,e,f,g){if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.initFilters=function(h){h.enableBehavior(g);};},3);
__d("TypeaheadDetectQueryLocale",[],function(a,b,c,d,e,f){function g(h){"use strict";this._typeahead=h;this._data=h.getData();this._queryCache={'':this._data.queryCache,ja_JP:{},zh_TW:{}};}g.prototype.enable=function(){"use strict";this._previousLocale='';this._reset=this._typeahead.subscribe('reset',this._swapQueryCache.bind(this,''));this._beforeQuery=this._data.subscribe('beforeQuery',function(h,i){var j=i.value;if(j===''){this._swapQueryCache('');return;}var k=null,l=j.charCodeAt(j.length-1);if(12352<=l&&l<=12543){k='ja_JP';}else if(12544<=l&&l<=12735)k='zh_TW';this._swapQueryCache(k);}.bind(this));};g.prototype.disable=function(){"use strict";this._swapQueryCache('');this._data.unsubscribe(this._beforeQuery);this._typeahead.ubsubscribe(this._reset);};g.prototype._swapQueryCache=function(h){"use strict";if(h===null||h===this._previousLocale)return;this._data.queryCache=this._queryCache[h];this._data.setQueryData({query_locale:h});this._previousLocale=h;};e.exports=g;});
__d("TypeaheadExcludeBootstrapFromQueryCache",[],function(a,b,c,d,e,f){function g(h){"use strict";this._data=h.getData();}g.prototype.enable=function(){"use strict";this._buildingQueryCache=false;this._buildQueryCache=this._data.subscribe('buildQueryCache',function(){this._buildingQueryCache=true;}.bind(this));this._mergeUids=this._data.subscribe('mergeUids',function(h,i){if(this._buildingQueryCache)i.local_uids.splice(0,i.local_uids.length);}.bind(this));this._fetchComplete=this._data.subscribe('fetchComplete',function(){this._buildingQueryCache=false;}.bind(this));};g.prototype.disable=function(){"use strict";this._data.unsubscribe(this._buildQueryCache);this._data.unsubscribe(this._mergeUids);this._data.unsubscribe(this._fetchComplete);};e.exports=g;});
__d("XUIBadge",["CSS","DOM","cx","invariant"],function(a,b,c,d,e,f,g,h,i,j){function k(m){return parseInt(m,10)===m;}function l(m){"use strict";this.target=m.target;this.count=m.count;this.maxcount=m.maxcount;}l.prototype.getCount=function(){"use strict";return this.count;};l.prototype.setCount=function(m){"use strict";j(k(m));j(m>=0);this.count=m;g.conditionClass(this.target,'hidden_elem',this.count===0);if(m>this.maxcount){h.setContent(this.target,this.maxcount+'+');g.addClass(this.target,"_5ugi");}else{h.setContent(this.target,m);g.removeClass(this.target,"_5ugi");}};l.prototype.setLegacyContent=function(m){"use strict";if(typeof m==='string'){g.conditionClass(this.target,'hidden_elem',m==0);h.setContent(this.target,m);g.removeClass(this.target,"_5ugi");}else this.setCount(m);};l.prototype.increment=function(){"use strict";this.setCount(this.getCount()+1);};e.exports=l;});
__d("TypeaheadRegulateMemorializedUsers",["TokenizeUtil","copyProperties"],function(a,b,c,d,e,f,g,h){function i(j){"use strict";this._typeahead=j;}i.prototype._filter=function(j,k){"use strict";if(j.type!=='user'||!j.memorialized)return true;var l=g.parse(j.text).tokens;if(l.length===1&&g.isExactMatch(k,j.text))return true;var m=this._typeahead.getData().getTextToIndex(j),n=g.parse(k).tokens;return (n.length>1&&g.isQueryMatch(k,m));};i.prototype.enable=function(){"use strict";this._filterRegistry=this._typeahead.getData().addFilter(this._filter.bind(this));};i.prototype.disable=function(){"use strict";this._filterRegistry.remove();this._filterRegistry=null;};h(i.prototype,{_filterRegistry:null});e.exports=i;});
__d("legacy:RegulateMemorializedUsersTypeaheadBehavior",["TypeaheadRegulateMemorializedUsers"],function(a,b,c,d,e,f,g){if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.regulateMemorializedUsers=function(h){h.enableBehavior(g);};},3);
__d("VaultBoxURI",["URI"],function(a,b,c,d,e,f,g){var h={PHOTOS_SYNCED:'photos_synced',isVaultBoxURI:function(i){var j=new RegExp("\/"+h.PHOTOS_SYNCED+"\/?$");return i.getPath().match(j)&&i.getQueryData().hasOwnProperty('view_image');},isVaultArchiveURI:function(i){var j=new RegExp("\/"+h.PHOTOS_SYNCED+"\/?$");return i.getPath().match(j);},getSyncedTabURI:function(){return new g('/me/'+h.PHOTOS_SYNCED).getQualifiedURI();}};e.exports=h;});